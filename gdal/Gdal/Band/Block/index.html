<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Block (gdal.Gdal.Band.Block)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">gdal</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Gdal.Band.Block</span></h1></header><h3>Block IO</h3><p>These functions should generally be faster than the more generic <a href="index.html#val-read">read</a>
and <a href="index.html#val-write">write</a> functions.</p><div class="spec exception" id="exception-Wrong_dimensions"><a href="#exception-Wrong_dimensions" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Wrong_dimensions</span></code></div><div class="doc"></div></div><div class="spec type" id="type-offset_t"><a href="#type-offset_t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>offset_t</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-offset_t.block" class="anchored"><td class="def field"><a href="#type-offset_t.block" class="anchor"></a><code>block : int<span class="keyword"> * </span>int;</code></td></tr><tr id="type-offset_t.offset" class="anchored"><td class="def field"><a href="#type-offset_t.offset" class="anchor"></a><code>offset : int<span class="keyword"> * </span>int;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-make_block_offset"><a href="#val-make_block_offset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make_block_offset : block:(int<span class="keyword"> * </span>int) <span class="keyword">&#8209;&gt;</span> offset:(int<span class="keyword"> * </span>int) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-offset_t">offset_t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-pixel_of_block_offset"><a href="#val-pixel_of_block_offset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pixel_of_block_offset : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-offset_t">offset_t</a> <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int</code></div><div class="doc"><p><code class="code">pixel_of_block_offset t</code> returns a function which may be used to convert
offsets within a block to pixel offsets within the band <code class="code">t</code>.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> f: A function which, given a block index <code class="code">block</code> and an offset
within that block <code class="code">offset</code> returns the index of the matching pixel.</li></ul></div></div><div class="spec val" id="val-block_of_pixel_offset"><a href="#val-block_of_pixel_offset" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>block_of_pixel_offset : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-offset_t">offset_t</a></code></div><div class="doc"><p><code class="code">block_of_pixel_offset t</code> returns a function which returns the
block_offset_t matching the pixel offset provided.</p></div></div><div class="spec val" id="val-get_block_count"><a href="#val-get_block_count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_block_count : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int</code></div><div class="doc"><p><code class="code">get_block_count t</code> returns <code class="code">(nx, ny)</code> giving the number of blocks in the
band's x direction (<code class="code">nx</code>) and the number of blocks in the band's y
direction (<code class="code">ny</code>).</p></div></div><div class="spec val" id="val-get_size"><a href="#val-get_size" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_size : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int</code></div><div class="doc"><p><code class="code">get_size t</code> returns the native <code class="code">(x, y)</code> dimensions of the individual
blocks making up <code class="code">t</code>.</p></div></div><div class="spec val" id="val-read"><a href="#val-read" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read : ?&#8288;data:(<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> column:int <span class="keyword">&#8209;&gt;</span> row:int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t</code></div><div class="doc"><p><code class="code">read ?data t ~column ~row</code> returns the block at given offset in <code class="code">t</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">data</span>: will be written to and returned if it is provided, otherwise
a fresh <span class="xref-unresolved" title="unresolved reference to &quot;Bigarray.Array2.t&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Bigarray.Array2&quot;">Bigarray.Array2</span>.t</span> will be allocated. <code class="code">data</code> must be
large enough to hold at least on block of values.</li><li><span class="at-tag raise">Raises</span> <span class="module-path">Wrong_dimensions</span>: if <code class="code">data</code> is provided and does not have enough
elements to hold a block.</li></ul></div></div><div class="spec val" id="val-write"><a href="#val-write" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>write : (<span class="type-var">'v</span>, <span class="type-var">'e</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> column:int <span class="keyword">&#8209;&gt;</span> row:int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">write t ~column ~row data</code> writes <code class="code">data</code> to the block at the given offset
in <code class="code">t</code>.</p></div></div><div class="spec val" id="val-iter"><a href="#val-iter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter : (<span class="type-var">'v</span>, <span class="type-var">'e</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> read:bool <span class="keyword">&#8209;&gt;</span> write:bool <span class="keyword">&#8209;&gt;</span> (int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">iter t ~read ~write f</code> applies <code class="code">f</code> to each block in <code class="code">t</code>. The <code class="code">read</code>
and <code class="code">write</code> arguments determine if values are from <code class="code">t</code>, written to <code class="code">t</code> or
both.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">f</span>: gets three arguments: the <code class="code">i</code> index, <code class="code">j</code> index and a
bigarray with the contents of the current block. If <code class="code">read</code> is <code class="code">true</code>
then the bigarray will contain the current contents of the block at
<code class="code">(i, j)</code>. If <code class="code">write</code> is <code class="code">true</code> then the contents of the bigarray will be
written to the block at <code class="code">(i, j)</code> after <code class="code">f</code> returns.</li></ul></div></div><div class="spec val" id="val-iter_read"><a href="#val-iter_read" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter_read : (<span class="type-var">'v</span>, <span class="type-var">'e</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">iter_read t f</code> applies <code class="code">f</code> to each block in <code class="code">t</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">f</span>: gets three arguments: the <code class="code">column</code> index, <code class="code">row</code> index and a
bigarray with the contents of the current block.</li></ul></div></div><div class="spec val" id="val-iter_write"><a href="#val-iter_write" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter_write : (<span class="type-var">'v</span>, <span class="type-var">'e</span>) <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <span class="type-var">'e</span>, Bigarray.c_layout) Bigarray.Array2.t <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">iter_write t f</code> applies <code class="code">f</code> to each block in <code class="code">t</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">f</span>: gets three arguments: the <code class="code">column</code> index, <code class="code">row</code> index and a
bigarray which should be filled with the values meant for the current
block.</li></ul></div></div></body></html>